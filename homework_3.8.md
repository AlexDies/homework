## Домашняя работа к занятию "3.8. Компьютерные сети, лекция 3"

1. __ipvs. Если при запросе на VIP сделать подряд несколько запросов (например, for i in {1..50}; do curl -I -s 172.28.128.200>/dev/null; done )>
Тем не менее, в выводе ipvsadm -Ln еще некоторое время будут висеть активные InActConn. Почему так происходит?__

В режиме LVS-NAT директор пропускает через себя всю информацию, что позволяет видеть, когда соединение открыто и закрыто.
В режиме же DR (Direct routing) идет перенаправление пакета на VIP адрес реала, но реал обратно отвечает напрямую клиенту, минуя балансер.
Отсюда следует, что директор не знатает, когда будет закрыто TCP-соединение, так как иницатива на закрытие TCP-соединения (FIN) будет со сторон>
Но директор увидет только ответ от клиента - ACK на закрытие соединение FIN. Соответственно, он лишь предполагает, что соединение закрыто и при>

---

2. На лекции мы познакомились отдельно с ipvs и отдельно с keepalived. Воспользовавшись этими знаниями, совместите технологии вместе (VIP долже>
Приложите конфигурационные файлы, которые у вас получились, и продемонстрируйте работу получившейся конструкции. Используйте для директора отде>
Подобная схема возможна, но выходит за рамки рассмотренного на лекции.__



---
3. __В лекции мы использовали только 1 VIP адрес для балансировки.
У такого подхода несколько отрицательных моментов, один из которых – невозможность активного использования нескольких хостов (1 адрес может тол>
Подумайте, сколько адресов оптимально использовать, если мы хотим без какой-либо деградации выдерживать потерю 1 из 3 хостов при входящем трафи>
Предполагается, что мы хотим задействовать 3 балансировщика в активном режиме (то есть не 2 адреса на 3 хоста, один из которых в обычное время >


