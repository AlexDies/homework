## Домашнее задание к занятию "6.1. Типы и структура СУБД"
___
**Задача 1**

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде 
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.
___
**Выполнение ДЗ:**

**1. Электронные чеки в json виде** 

_Не знаю какое БД будет лучше, так как и реляционные SQL БД умеют работать с json и NoSQL также умеют работать с json, например, MongoDB._

**P/S. Подскажите, в таком кейсе от чего зависит всё таки выбор? И в каких случаях лучше SQL или же NoSQL использовать?**

**2. Склады и автомобильные дороги для логистической компании**
  
_Думаю, что подойдёт реляционная БД (например, MySQL), так как склады и автомобильные дороги статичны, нет необходимости в постоянном изменении данных. Мы вполне удобно можем посмотреть путь по запросу из таблицы._

**3. Генеалогические деревья**

_Подойдёт NoSQL БД иерархической модели так как имеет аналогичную древовидную структуру, где присутствует связь родитель - потомок._

**4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации**

_Подойдёт NoSQL БД ключ-значение, например, Memcache или Redis. Так как эти БД позволяют работать с кэш данными и периодически очищать их._

**5. Отношения клиент-покупка для интернет-магазина**

_Тут возник вопрос, так как подходит и SQL и NoSQL БД. Например, MongoDB для электронной коммерции и фиксации интернет-пользователей. Но и подходит тот же MySQL.
Мне кажется, что большее предпочтение лучше отдать NoSQL в связи с тем, что данные могут быстро изменяться._


**P/S. Если есть какие-либо замечания, то прошу дать обратную связь.**

___
**Задача 2**

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. 
Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
___
**Выполнение ДЗ:**

**Согласно CAP-теореме:**

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись)

_Думаю, что это будет PC, так как во-первых - это несколько узлов, то есть несколько партиций (P) и во вторых - если данные записываются на все узлы, то они доступны (A). Но так как есть задержка, данные не синхронны, значит отсутствует согласованность (С)_

2. При сетевых сбоях, система может разделиться на 2 раздельных кластера

_Это PA система, так как данные не будут согласованы в каждом кластере, из-за этого и получается 2 раздельных кластера. Они оба доступны и каждый теперь имеет "свои" данные и может выдать разный ответ._

3. Система может не прислать корректный ответ или сбросить соединение

_Думаю, что тут получается P система. Так как некорректный ответ - это отсутсвие согласованности (С), сброс соединения - отсутсвие доступности (А)_

**Согласно PACELC-теореме:**

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись)

_Думаю, что это система получается PC/EC - когда данные согласованы при разделении или согласование является главной особенностью, отсюда идёт потеря в доступности и задержка (L)_

2. При сетевых сбоях, система может разделиться на 2 раздельных кластера

_Думаю, что это PA/EL система, так как имеется разделение и доступность, но отсутствует согласованность. Но при этом будет высокая скорость ответа (хоть и не согласованного)_

3. Система может не прислать корректный ответ или сбросить соединение

_Предполагаю, что тут будет система PA/EC. Так как акцент сделан на том, что ответ может быть не корректным, значит система будет доступной. Если же система не делится, то акцент делается на согласованности._

___
**Задача 3**

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
___
**Выполнение ДЗ:**

Я думаю, что тут смотря с какой стороны подойти к ответу. Если смотреть о системе в плане "переключения" этих принципов, то может. Например, MongoDB, где принцип транзакции можно выбрать.
Если же речь об одновременной работе двух принципов, то это будет невозможно на мой взгляд. Потому что сам по себе принцип BASE в какой-то степени противоположен ACID. В BASE акцент сделан на доступности и высокой скорости работы, но не согласованности (могут быть ошибки)
В ACID же наоборот, нацелена на максимальную надежность и согласованность, но "жертвует" в какой-то степени доступностью. Также каждая операция в ACID должна быть зафиксирована полностью, а в BASE только фиксируются обновления только критических операций.
___
**Задача 4**

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?
___
**Выполнение ДЗ:**

Это система Redis, она позволяет организовать хранилище кэша в формате key-value и имеет механизм Pub/Sub. 

Минусы которые удалось изучить: 
1. При master-slave репликации и отказе ведущей реплики - необходимо вручную выбирать новую реплику. По умолчанию механизма определенеия и переключеняи нет.
2. Redis хранит кэш в памяти (не беря в расчет возможность сохранения на диск), соответственно, ограничен памятью. Невозможно поместить большое количество.

**P/S Если есть ещё какие-либо нюансы, то прошу помочь с ответом.**